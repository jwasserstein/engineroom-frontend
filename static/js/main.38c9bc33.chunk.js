(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{100:function(e,t,r){},101:function(e,t,r){},102:function(e,t,r){},103:function(e,t,r){},104:function(e,t,r){},105:function(e,t,r){},106:function(e,t,r){},107:function(e,t,r){},108:function(e,t,r){},109:function(e,t,r){},110:function(e,t,r){},111:function(e,t,r){},112:function(e,t,r){},113:function(e,t,r){},114:function(e,t,r){},115:function(e,t,r){},45:function(e,t){},514:function(e,t,r){},515:function(e,t,r){},516:function(e,t,r){},517:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(3),s=r.n(n),c=r(34),i=r.n(c),o=(r(83),r(7)),u=r(8),l=r(10),d=r(9),h=r(11),b=r(16),j=r(6),m=r.n(j),f=r(14),p="LOG_IN",g="LOG_OUT",O="GET_POSTS",v="GET_FEED_POSTS",x="ADD_POST",N="REMOVE_POSTS",w="GET_USERS",y="GET_RANDOM_USERS",C="REMOVE_USERS",k="GET_CARS",P="GET_RANDOM_CARS",S="REMOVE_CARS";function I(e,t,r){return R.apply(this,arguments)}function R(){return(R=Object(f.a)(m.a.mark((function e(t,r,a){var n,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://engineroom-api.herokuapp.com/api"+r,{method:t.toLowerCase(),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.token)},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{error:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var E=r(13),U=r(1);var F=function(e){var t=function(t){Object(l.a)(n,t);var r=Object(d.a)(n);function n(){return Object(o.a)(this,n),r.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.userId||this.props.history.push("/login")}},{key:"componentDidUpdate",value:function(){this.props.userId||this.props.history.push("/login")}},{key:"render",value:function(){return this.props.userId?Object(a.jsx)(e,Object(U.a)({},this.props)):Object(a.jsx)("div",{children:"Loading..."})}}]),n}(n.Component);return Object(E.b)((function(e){return{userId:e.authReducer.userId}}))(t)},D=r(5),_=(r(91),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(o.a)(this,r),(a=t.call(this,e)).state={menuActive:""},a.toggleMenu=a.toggleMenu.bind(Object(D.a)(a)),a.closeMenu=a.closeMenu.bind(Object(D.a)(a)),a}return Object(u.a)(r,[{key:"toggleMenu",value:function(){""===this.state.menuActive?this.setState({menuActive:"active"}):this.setState({menuActive:""})}},{key:"closeMenu",value:function(){this.setState({menuActive:""})}},{key:"render",value:function(){var e=this,t=this.props,r=t.username,n=t.userId,s=t.logOut,c=this.state.menuActive;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"Navbar-spacer"}),Object(a.jsxs)("header",{className:"Navbar "+c,children:[Object(a.jsxs)("div",{className:"Navbar-burger",onClick:this.toggleMenu,children:[Object(a.jsx)("span",{className:"Navbar-bar"}),Object(a.jsx)("span",{className:"Navbar-bar"}),Object(a.jsx)("span",{className:"Navbar-bar"})]}),Object(a.jsx)(h.b,{onClick:this.closeMenu,to:"/",className:"Navbar-brand",children:Object(a.jsxs)("h1",{children:[Object(a.jsx)("i",{className:"fa fa-car","aria-hidden":"true"}),"EngineRoom"]})}),Object(a.jsxs)("div",{className:"Navbar-links-left",children:[Object(a.jsx)(h.b,{onClick:this.closeMenu,to:"/users/".concat(n),className:"Navbar-link",children:"Your Wall"}),Object(a.jsx)(h.b,{onClick:this.closeMenu,to:"/feed",className:"Navbar-link",children:"Your Feed"}),Object(a.jsx)(h.b,{onClick:this.closeMenu,to:"/explore",className:"Navbar-link",children:"Explore"}),Object(a.jsx)(h.b,{onClick:this.closeMenu,to:"/about",className:"Navbar-link",children:"About"})]}),r?Object(a.jsxs)("div",{className:"Navbar-links-right",children:[Object(a.jsxs)(h.b,{onClick:this.closeMenu,to:"/profile",className:"Navbar-link",children:["@",r]}),Object(a.jsx)(h.b,{onClick:function(){e.closeMenu(),s()},to:"/login",className:"Navbar-link Navbar-signup-btn",children:"Sign Out"})]}):Object(a.jsxs)("div",{className:"Navbar-links-right",children:[Object(a.jsx)(h.b,{onClick:this.closeMenu,to:"/login",className:"Navbar-link",children:"Log In"}),Object(a.jsx)(h.b,{onClick:this.closeMenu,to:"/signup",className:"Navbar-link Navbar-signup-btn",children:"Sign Up"})]})]})]})}}]),r}(n.Component)),M=(r(95),function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"Footer-spacer"}),Object(a.jsx)("footer",{className:"Footer",children:"Copyright \xa9 2021, Justin Wasserstein"})]})}),T=r.p+"static/media/whitebmw.ec523fef.jpg",L=(r(96),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(o.a)(this,r),(a=t.call(this,e)).state={width:0,height:0},a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(D.a)(a)),a}return Object(u.a)(r,[{key:"componentDidMount",value:function(){document.title="EngineRoom | Welcome",this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{width:window.innerWidth,height:window.innerHeight}))}},{key:"render",value:function(){var e=this.state,t=e.width,r=e.height,n=t>900?r-100:r-82;return Object(a.jsx)("div",{className:"LandingPage-main-container",style:{height:n},children:Object(a.jsx)("div",{className:"LandingPage-Hero-image",style:{backgroundImage:"url(".concat(T,")")},children:Object(a.jsxs)("div",{className:"LandingPage-Hero-text",children:[Object(a.jsx)("h1",{children:"Welcome to EngineRoom"}),Object(a.jsx)("p",{children:"The premier social media application for car enthusiasts"}),Object(a.jsx)(h.b,{to:"/signup",children:"Join Now"})]})})})}}]),r}(n.Component)),A=(r(97),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"componentDidMount",value:function(){document.title="EngineRoom | About"}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"AboutPage-container",children:[Object(a.jsxs)("div",{className:"AboutPage-title AboutPage-blob",children:[Object(a.jsx)("h2",{children:"About"}),Object(a.jsx)("p",{children:"Learn the story of EngineRoom"})]}),Object(a.jsxs)("div",{className:"AboutPage-about AboutPage-blob",children:[Object(a.jsx)("p",{children:"EngineRoom is a demonstration social media application made for the purposes of learning React and Redux. It allows users to add their cars, find friends, make posts, and make comments.  It was designed in Figma and uses the following technologies:"}),Object(a.jsxs)("ul",{children:[Object(a.jsxs)("li",{children:[Object(a.jsx)("strong",{children:"Frontend"}),": React and Redux"]}),Object(a.jsxs)("li",{children:[Object(a.jsx)("strong",{children:"Backend"}),": Node.js and Express"]}),Object(a.jsxs)("li",{children:[Object(a.jsx)("strong",{children:"Database"}),": MongoDB"]})]}),Object(a.jsxs)("p",{className:"AboutPage-handcrafted",children:["Hand-crafted with ",Object(a.jsx)("span",{className:"AboutPage-heart",children:"\u2764"})," in Glastonbury, Connecticut."]})]})]})}}]),r}(n.Component)),W=r(17),q=(r(98),function(e){var t=e.className,r=e.form,n=e.children,s=e.to,c=e.onClick,i=t?"Button ".concat(t):"Button";return r?Object(a.jsx)("button",{type:"submit",className:i,onClick:c,children:n}):Object(a.jsx)(h.b,{className:i,to:s,onClick:c,children:n})}),B=(r(99),function(e){var t=e.fields,r=e.loading,n=e.buttonText,s=e.onSubmit,c=e.onChange,i=t.map((function(e){return Object(a.jsxs)("label",{htmlFor:e.name,className:"Form-label",children:[e.label,":",Object(a.jsx)("input",{type:e.type,className:"Form-field",value:e.value,onChange:c,id:e.name,name:e.name,placeholder:e.placeholder,autoComplete:"off",autoCorrect:"off",autoCapitalize:"none",required:!0})]},e.name)}));return Object(a.jsxs)("form",{className:"Form-form",onSubmit:s,children:[i,Object(a.jsx)(q,{form:!0,children:r?"Loading...":n})]})}),J=(r(100),function(e){var t=e.color,r=e.onClearError,n=e.children,s="Message-"+(t||"red");return Object(a.jsxs)("div",{className:"Message "+s,children:[Object(a.jsx)("span",{onClick:r,children:"X"}),Object(a.jsx)("h3",{children:"red"===t?"Error":"Success"}),n]})}),G=(r(101),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(o.a)(this,r),(a=t.call(this,e)).onChange=function(e){a.setState(Object(U.a)(Object(U.a)({},a.state),{},Object(W.a)({},e.target.name,e.target.value)))},a.onSubmit=function(e){e.preventDefault();var t=a.state,r=t.password,n=t.repeatPassword,s=t.username,c=t.firstName,i=t.lastName;if(r!==n)return a.setState(Object(U.a)(Object(U.a)({},a.state),{},{error:"Your passwords don't match"}));a.setState(Object(U.a)(Object(U.a)({},a.state),{},{fetching:a.state.fetching+1})),a.props.signUp(s,r,c,i).then((function(){return a.props.history.push("/feed")})).catch((function(e){return a.setState(Object(U.a)(Object(U.a)({},a.state),{},{fetching:a.state.fetching-1,error:e}))}))},a.state={firstName:"",lastName:"",username:"",password:"",repeatPassword:"",fetching:0,error:""},a.onClearError=a.onClearError.bind(Object(D.a)(a)),a}return Object(u.a)(r,[{key:"componentDidMount",value:function(){document.title="EngineRoom | Signup"}},{key:"onClearError",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{error:""}))}},{key:"render",value:function(){var e=this.state,t=e.firstName,r=e.lastName,n=e.username,s=e.password,c=e.repeatPassword,i=e.error,o=e.fetching,u=[{label:"First Name",name:"firstName",type:"text",value:t,placeholder:"John"},{label:"Last Name",name:"lastName",type:"text",value:r,placeholder:"Doe"},{label:"Username",name:"username",type:"text",value:n,placeholder:"mikeybob123"},{label:"Password",name:"password",type:"password",value:s,placeholder:"********"},{label:"Repeat Password",name:"repeatPassword",type:"password",value:c,placeholder:"********"}];return Object(a.jsxs)("div",{className:"SignupPage-container",children:[Object(a.jsxs)("div",{className:"SignupPage-title SignupPage-blob",children:[Object(a.jsx)("h2",{children:"Sign Up"}),Object(a.jsx)("p",{children:"Create an EngineRoom account"})]}),i&&Object(a.jsx)(J,{color:"red",onClearError:this.onClearError,children:i}),Object(a.jsx)(B,{onSubmit:this.onSubmit,onChange:this.onChange,fields:u,loading:0!==o,buttonText:"Sign Up"})]})}}]),r}(n.Component)),z=Object(E.b)(null,{signUp:function(e,t,r,a){return function(n){return new Promise(function(){var s=Object(f.a)(m.a.mark((function s(c,i){var o,u,l;return m.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,I("post","/auth/signup",{username:e,password:t,firstName:r,lastName:a});case 3:if(!(o=s.sent).error){s.next=6;break}return s.abrupt("return",i(o.error));case 6:if(o.token){s.next=8;break}return s.abrupt("return",i("Error getting token"));case 8:for(localStorage.setItem("token",o.token),localStorage.setItem("awsToken",o.awsToken),u={},l=0;l<o.users.length;l++)u[o.users[l]._id]=o.users[l];return n({type:p,id:o.id,username:o.username,awsIdentityId:o.awsIdentityId}),n({type:w,users:u}),s.abrupt("return",c());case 17:return s.prev=17,s.t0=s.catch(0),s.abrupt("return",i(s.t0.message));case 20:case"end":return s.stop()}}),s,null,[[0,17]])})));return function(e,t){return s.apply(this,arguments)}}())}}})(G),V=(r(102),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(o.a)(this,r),(a=t.call(this,e)).onChange=function(e){a.setState(Object(U.a)(Object(U.a)({},a.state),{},Object(W.a)({},e.target.name,e.target.value)))},a.onSubmit=function(e){e.preventDefault(),a.setState(Object(U.a)(Object(U.a)({},a.state),{},{fetching:a.state.fetching+1})),a.props.logIn(e.target.username.value,e.target.password.value).then((function(){return a.props.history.push("/feed")})).catch((function(e){return a.setState(Object(U.a)(Object(U.a)({},a.state),{},{fetching:a.state.fetching-1,error:e,username:"",password:""}))}))},a.state={username:"",password:"",fetching:0,error:""},a.onClearError=a.onClearError.bind(Object(D.a)(a)),a}return Object(u.a)(r,[{key:"componentDidMount",value:function(){document.title="EngineRoom | Login"}},{key:"onClearError",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:0,error:""}))}},{key:"render",value:function(){var e=this.state,t=e.username,r=e.password,n=e.fetching,s=e.error,c=[{label:"Username",name:"username",type:"text",value:t,placeholder:"mikeybob123"},{label:"Password",name:"password",type:"password",value:r,placeholder:"********"}];return Object(a.jsxs)("div",{className:"LoginPage-container",children:[Object(a.jsxs)("div",{className:"LoginPage-title LoginPage-blob",children:[Object(a.jsx)("h2",{children:"Login"}),Object(a.jsx)("p",{children:"Login to your EngineRoom account"})]}),s&&Object(a.jsx)(J,{color:"red",onClearError:this.onClearError,children:s}),Object(a.jsx)(B,{onSubmit:this.onSubmit,onChange:this.onChange,loading:0!==n,fields:c,buttonText:"Log In"})]})}}]),r}(n.Component)),H=Object(E.b)(null,{logIn:function(e,t){return function(r){return new Promise(function(){var a=Object(f.a)(m.a.mark((function a(n,s){var c,i,o;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,I("post","/auth/signin",{username:e,password:t});case 3:if(!(c=a.sent).error){a.next=6;break}return a.abrupt("return",s(c.error));case 6:if(c.token){a.next=8;break}return a.abrupt("return",s("Error getting token"));case 8:for(localStorage.setItem("token",c.token),localStorage.setItem("awsToken",c.awsToken),i={},o=0;o<c.users.length;o++)i[c.users[o]._id]=c.users[o];return r({type:p,id:c.id,username:c.username,awsIdentityId:c.awsIdentityId}),r({type:w,users:i}),a.abrupt("return",n());case 17:return a.prev=17,a.t0=a.catch(0),a.abrupt("return",s(a.t0.message));case 20:case"end":return a.stop()}}),a,null,[[0,17]])})));return function(e,t){return a.apply(this,arguments)}}())}}})(V);function Y(e){return function(t){return new Promise(function(){var r=Object(f.a)(m.a.mark((function r(a,n){var s,c,i;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,I("get","/users/random/".concat(e));case 3:if(!(s=r.sent).error){r.next=6;break}return r.abrupt("return",n(s.error));case 6:for(c={},i=0;i<s.users.length;i++)c[s.users[i]._id]=s.users[i];return t({type:w,users:c}),t({type:y,randomUserIds:s.randomUserIds}),r.abrupt("return",a());case 13:return r.prev=13,r.t0=r.catch(0),r.abrupt("return",n(r.t0.message));case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(e,t){return r.apply(this,arguments)}}())}}function K(e,t,r){return function(a){return new Promise(function(){var n=Object(f.a)(m.a.mark((function n(s,c){var i,o,u,l,d,h,b,j;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i="/users?ids=".concat(JSON.stringify(e)),t&&(i+="&cars=true"),r&&(i+="&posts=true"),n.next=6,I("get",i);case 6:if(!(o=n.sent).error){n.next=9;break}return n.abrupt("return",c(o.error));case 9:for(u={},l=0;l<o.users.length;l++)u[o.users[l]._id]=o.users[l];if(a({type:w,users:u}),"cars"in o){for(d={},h=0;h<o.cars.length;h++)d[o.cars[h]._id]=o.cars[h];a({type:k,cars:d})}if("posts"in o){for(b={},j=0;j<o.posts.length;j++)b[o.posts[j]._id]=o.posts[j];a({type:O,posts:b})}return n.abrupt("return",s());case 17:return n.prev=17,n.t0=n.catch(0),n.abrupt("return",c(n.t0.message));case 20:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e,t){return n.apply(this,arguments)}}())}}function X(e){return function(t){return new Promise(function(){var r=Object(f.a)(m.a.mark((function r(a,n){var s,c,i;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,I("post","/users/".concat(e,"/friend"));case 3:if(!(s=r.sent).error){r.next=6;break}return r.abrupt("return",n(s.error));case 6:for(c={},i=0;i<s.users.length;i++)c[s.users[i]._id]=s.users[i];return t({type:w,users:c}),r.abrupt("return",a());case 12:return r.prev=12,r.t0=r.catch(0),r.abrupt("return",n(r.t0.message));case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e,t){return r.apply(this,arguments)}}())}}function $(e){return function(t){return new Promise(function(){var r=Object(f.a)(m.a.mark((function r(a,n){var s,c,i;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,I("get","/cars/random/".concat(e));case 3:if(!(s=r.sent).error){r.next=6;break}return r.abrupt("return",n(s.error));case 6:for(c={},i=0;i<s.cars.length;i++)c[s.cars[i]._id]=s.cars[i];return t({type:k,cars:c}),t({type:P,randomCarIds:s.randomCarIds}),r.abrupt("return",a());case 13:return r.prev=13,r.t0=r.catch(0),r.abrupt("return",n(r.t0.message));case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(e,t){return r.apply(this,arguments)}}())}}function Q(e){return function(t){return new Promise(function(){var r=Object(f.a)(m.a.mark((function r(a,n){var s,c,i;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,I("get","/cars?ids=".concat(JSON.stringify(e)));case 3:if(!(s=r.sent).error){r.next=6;break}return r.abrupt("return",n(s.error));case 6:for(c={},i=0;i<s.cars.length;i++)c[s.cars[i]._id]=s.cars[i];return t({type:k,cars:c}),r.abrupt("return",a());case 12:return r.prev=12,r.t0=r.catch(0),r.abrupt("return",n(r.t0.message));case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e,t){return r.apply(this,arguments)}}())}}r(103);var Z=function(e){var t=e.firstName,r=e.lastName,n=e.imageUrl,s=e.id,c=e.width,i=void 0===c?150:c;return Object(a.jsxs)(h.b,{className:"User-person",to:"/users/".concat(s),style:{width:"".concat(i,"px")},children:[Object(a.jsx)("img",{src:n,alt:t+" "+r}),Object(a.jsxs)("h3",{children:[t," ",r]})]})},ee=(r(104),function(e){var t=e.name,r=e.imageUrl,n=e.userId,s=e.width,c=void 0===s?270:s,i=e.style;return Object(a.jsxs)(h.b,{className:"Car-car",to:"/users/".concat(n,"/cars"),style:Object(U.a)({width:"".concat(c,"px")},i),children:[Object(a.jsx)("img",{src:r,alt:t}),Object(a.jsx)("h3",{children:t})]})}),te=(r(105),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(o.a)(this,r),(a=t.call(this,e)).state={fetching:0,error:""},a.checkMissingData=a.checkMissingData.bind(Object(D.a)(a)),a.onClearError=a.onClearError.bind(Object(D.a)(a)),a}return Object(u.a)(r,[{key:"checkMissingData",value:function(){var e=this,t=this.state.fetching;0===this.props.userReducer.randomUserIds.lastUpdated&&(t++,this.props.getRandomUsers(6).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))}))),0===this.props.carReducer.randomCarIds.lastUpdated&&(t++,this.props.getRandomCars(4).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))}))),t!==this.state.fetching&&this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:t}))}},{key:"componentDidMount",value:function(){document.title="EngineRoom | Explore",this.checkMissingData()}},{key:"componentDidUpdate",value:function(){0===this.state.fetching&&""===this.state.error&&this.checkMissingData()}},{key:"onClearError",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{error:""}))}},{key:"render",value:function(){var e=this.props,t=e.carReducer,r=e.userReducer,n=this.state.error,s=t.randomCarIds.ids||[],c=r.randomUserIds.ids||[],i=s.map((function(e){var r=t.cars[e]||{_id:e,name:"",imageUrl:"",userId:""};return Object(a.jsx)(ee,{name:r.name,imageUrl:r.imageUrl,userId:r.user,style:{marginLeft:"7.5px",marginRight:"7.5px"}},r._id)})),o=c.map((function(e){var t=r.users[e]||{_id:e,firstName:"",lastName:"",imageUrl:""};return Object(a.jsx)(Z,{firstName:t.firstName,lastName:t.lastName,imageUrl:t.imageUrl,id:t._id},t._id)}));return Object(a.jsxs)("div",{className:"ExplorePage-container",children:[Object(a.jsxs)("div",{className:"ExplorePage-inner-container",children:[n&&Object(a.jsx)(J,{color:"red",onClearError:this.onClearError,children:n}),Object(a.jsxs)("div",{className:"ExplorePage-title ExplorePage-blob",children:[Object(a.jsx)("h2",{children:"People"}),Object(a.jsx)("p",{children:"View a random selection of EngineRoom users"})]}),Object(a.jsx)("div",{className:"ExplorePage-people-container",children:o.length>0?o:Object(a.jsx)("div",{className:"ExplorePage-no-elements ExplorePage-blob",children:Object(a.jsx)("p",{children:"There aren't any users to show"})})})]}),Object(a.jsxs)("div",{className:"ExplorePage-inner-container",children:[Object(a.jsxs)("div",{className:"ExplorePage-title ExplorePage-blob",children:[Object(a.jsx)("h2",{children:"Cars"}),Object(a.jsx)("p",{children:"View a random selection of EngineRoom users' cars"})]}),Object(a.jsx)("div",{className:"ExplorePage-car-container",children:i.length>0?i:Object(a.jsx)("div",{className:"ExplorePage-no-elements ExplorePage-blob",children:Object(a.jsx)("p",{children:"There aren't any cars to show"})})})]})]})}}]),r}(n.Component));var re=Object(E.b)((function(e){return{userReducer:e.userReducer,carReducer:e.carReducer}}),{getRandomCars:$,getRandomUsers:Y})(te);function ae(e){return function(t){return new Promise(function(){var r=Object(f.a)(m.a.mark((function r(a,n){var s,c,i,o,u,l;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s="/posts",e&&e.length>0&&(s+="?ids="+JSON.stringify(e)),r.next=5,I("get",s);case 5:if(!(c=r.sent).error){r.next=8;break}return r.abrupt("return",n(c.error));case 8:for(i={},o=0;o<c.posts.length;o++)i[c.posts[o]._id]=c.posts[o];for(u={},l=0;l<c.users.length;l++)u[c.users[l]._id]=c.users[l];return t({type:O,posts:i}),t({type:w,users:u}),"feedPostIds"in c&&t({type:v,feedPostIds:c.feedPostIds}),r.abrupt("return",a());case 18:return r.prev=18,r.t0=r.catch(0),r.abrupt("return",n(r.t0.message));case 21:case"end":return r.stop()}}),r,null,[[0,18]])})));return function(e,t){return r.apply(this,arguments)}}())}}function ne(e){return function(t){return new Promise(function(){var r=Object(f.a)(m.a.mark((function r(a,n){var s,c,i;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,I("post","/posts/".concat(e,"/like"));case 3:if(!(s=r.sent).error){r.next=6;break}return r.abrupt("return",n(s.error));case 6:for(c={},i=0;i<s.posts.length;i++)c[s.posts[i]._id]=s.posts[i];return t({type:O,posts:c}),r.abrupt("return",a());case 12:return r.prev=12,r.t0=r.catch(0),r.abrupt("return",n(r.t0.message));case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e,t){return r.apply(this,arguments)}}())}}function se(e,t){return function(r){return new Promise(function(){var a=Object(f.a)(m.a.mark((function a(n,s){var c,i,o;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,I("post","/posts/".concat(t,"/comments"),{text:e});case 3:if(!(c=a.sent).error){a.next=6;break}return a.abrupt("return",s(c.error));case 6:for(i={},o=0;o<c.posts.length;o++)i[c.posts[o]._id]=c.posts[o];return r({type:O,posts:i}),a.abrupt("return",n());case 12:return a.prev=12,a.t0=a.catch(0),a.abrupt("return",s(a.t0.message));case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e,t){return a.apply(this,arguments)}}())}}function ce(e,t){return function(r){return new Promise(function(){var a=Object(f.a)(m.a.mark((function a(n,s){var c,i,o;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,I("delete","/posts/".concat(t,"/comments/").concat(e));case 3:if(!(c=a.sent).error){a.next=6;break}return a.abrupt("return",s(c.error));case 6:for(i={},o=0;o<c.posts.length;o++)i[c.posts[o]._id]=c.posts[o];return r({type:O,posts:i}),a.abrupt("return",n());case 12:return a.prev=12,a.t0=a.catch(0),a.abrupt("return",s(a.t0.message));case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e,t){return a.apply(this,arguments)}}())}}var ie=r(50),oe=r(36),ue=r.n(oe),le=r(75),de=r.n(le);r(106);ue.a.extend(de.a);var he=function(e){var t=e.postId,r=e.postUser,s=e.postDate,c=e.postText,i=e.postLikes,o=e.postComments,u=e.loggedInUserId,l=e.onLike,d=e.onCommentSubmit,b=e.onCommentDelete,j=e.users,m=o.map((function(e){var r=j[e.user];return r?Object(a.jsxs)("div",{className:"Post-comment",children:[r._id===u?Object(a.jsx)("span",{onClick:function(){return b(e._id,t)},children:"X"}):Object(a.jsx)("span",{}),Object(a.jsx)(h.b,{to:"/users/".concat(r._id),children:Object(a.jsx)("img",{src:r.imageUrl,alt:r.firstName+" "+r.lastName})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(h.b,{to:"/users/".concat(r._id),children:[r.firstName," ",r.lastName," - ",ue()(e.date).fromNow()]}),Object(a.jsx)("p",{children:e.text})]})]},e._id):Object(a.jsx)("div",{children:"Loading..."},e._id)})),f=Object(n.useState)(!1),p=Object(ie.a)(f,2),g=p[0],O=p[1],v=Object(n.useState)(""),x=Object(ie.a)(v,2),N=x[0],w=x[1];return Object(a.jsxs)("div",{className:"Post-post Post-blob",children:[Object(a.jsxs)(h.b,{className:"Post-post-user",to:"/users/".concat(r._id),children:[Object(a.jsx)("img",{src:r.imageUrl,alt:r.firstName+" "+r.lastName}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[r.firstName," ",r.lastName]}),Object(a.jsx)("p",{className:"Post-post-date",children:ue()(s).fromNow()})]})]}),Object(a.jsx)("p",{className:"Post-post-text",children:c}),Object(a.jsxs)("div",{className:"Post-like-container",children:[Object(a.jsxs)("div",{onClick:function(){return l(t)},className:i.includes(u)?"Post-like-green":void 0,children:[Object(a.jsx)("i",{className:"fa fa-thumbs-up","aria-hidden":"true"}),i.length," likes"]}),Object(a.jsxs)("div",{onClick:function(){return O(!g)},children:[Object(a.jsx)("div",{className:g?"Post-comments-arrow-expanded":"Post-comments-arrow-collapsed"}),o.length," comments"]})]}),Object(a.jsxs)("div",{className:"Post-comment-container",style:g?void 0:{display:"none"},children:[m,Object(a.jsxs)("form",{className:"Post-comment-form",onSubmit:function(e){!function(e){d(e,N,t),w("")}(e),w("")},children:[Object(a.jsx)("input",{className:"Post-comment-input",type:"text",placeholder:"Add a comment...",value:N,onChange:function(e){return w(e.target.value)}}),Object(a.jsx)("button",{children:Object(a.jsx)("i",{className:"fa fa-arrow-right","aria-hidden":"true"})})]})]})]})},be=(r(107),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(o.a)(this,r),(a=t.call(this,e)).state={postText:"",fetching:0,error:""},a.checkMissingData=a.checkMissingData.bind(Object(D.a)(a)),a.onLike=a.onLike.bind(Object(D.a)(a)),a.onPostSubmit=a.onPostSubmit.bind(Object(D.a)(a)),a.onCommentSubmit=a.onCommentSubmit.bind(Object(D.a)(a)),a.onCommentDelete=a.onCommentDelete.bind(Object(D.a)(a)),a.onChange=a.onChange.bind(Object(D.a)(a)),a.onClearError=a.onClearError.bind(Object(D.a)(a)),a}return Object(u.a)(r,[{key:"checkMissingData",value:function(){var e=this,t=this.props,r=t.authReducer,a=t.userReducer,n=t.postReducer,s=t.carReducer,c=t.getUsers,i=t.getPosts,o=t.getRandomUsers,u=t.getRandomCars,l=this.state.fetching;r.userId in a.users||(l++,c([r.userId]).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))}))),0===n.feedPostIds.lastUpdated&&(l++,i().catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))}))),0===a.randomUserIds.lastUpdated&&(l++,o(6).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))}))),0===s.randomCarIds.lastUpdated&&(l++,u(4).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))}))),l!==this.state.fetching&&this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:l}))}},{key:"componentDidMount",value:function(){document.title="EngineRoom | Feed",this.checkMissingData()}},{key:"componentDidUpdate",value:function(){0===this.state.fetching&&""===this.state.error&&this.checkMissingData()}},{key:"onLike",value:function(e){var t=this;this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),this.props.togglePostLike(e).catch((function(e){return t.setState(Object(U.a)(Object(U.a)({},t.state),{},{error:e}))})).finally((function(){return t.setState(Object(U.a)(Object(U.a)({},t.state),{},{fetching:t.state.fetching-1}))}))}},{key:"onPostSubmit",value:function(e){var t=this;e.preventDefault(),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),this.props.createPost(this.state.postText).catch((function(e){return t.setState(Object(U.a)(Object(U.a)({},t.state),{},{error:e}))})).finally((function(){return t.setState(Object(U.a)(Object(U.a)({},t.state),{},{fetching:t.state.fetching-1,postText:""}))}))}},{key:"onCommentSubmit",value:function(e,t,r){var a=this;e.preventDefault(),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),this.props.createComment(t,r).catch((function(e){return a.setState(Object(U.a)(Object(U.a)({},a.state),{},{error:e}))})).finally((function(){return a.setState(Object(U.a)(Object(U.a)({},a.state),{},{fetching:a.state.fetching-1}))}))}},{key:"onCommentDelete",value:function(e,t){var r=this;this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),this.props.deleteComment(e,t).catch((function(e){return r.setState(Object(U.a)(Object(U.a)({},r.state),{},{error:e}))})).finally((function(){return r.setState(Object(U.a)(Object(U.a)({},r.state),{},{fetching:r.state.fetching-1}))}))}},{key:"onChange",value:function(e){this.setState(Object(U.a)(Object(U.a)({},this.state),{},Object(W.a)({},e.target.name,e.target.value)))}},{key:"onClearError",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{error:""}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.authReducer,n=t.postReducer,s=t.userReducer,c=t.carReducer,i=this.state,o=i.postText,u=i.error,l=s.users[r.userId]||{},d=c.randomCarIds.ids||[],h=s.randomUserIds.ids||[],b=n.feedPostIds.ids||[],j=d.map((function(e){var t=c.cars[e]||{_id:e,name:"",imageUrl:"",userId:""};return Object(a.jsx)(ee,{name:t.name,imageUrl:t.imageUrl,userId:t.user,width:"200"},t._id)})),m=h.map((function(e){var t=s.users[e]||{_id:e,firstName:"",lastName:"",imageUrl:""};return Object(a.jsx)(Z,{firstName:t.firstName,lastName:t.lastName,imageUrl:t.imageUrl,id:t._id,width:"125"},t._id)})),f=b.map((function(t){var r=n.posts[t]||{_id:t,user:"",date:"",text:"",likers:[],comments:[]};return Object(a.jsx)(he,{postId:r._id,postUser:s.users[r.user],postDate:r.date,postText:r.text,postLikes:r.likers,postComments:r.comments,loggedInUserId:l._id,users:s.users,onLike:e.onLike,onCommentSubmit:e.onCommentSubmit,onCommentDelete:e.onCommentDelete},r._id)}));return Object(a.jsxs)("div",{className:"FeedPage-container",children:[Object(a.jsxs)("div",{className:"FeedPage-friends-container",children:[u&&Object(a.jsx)(J,{color:"red",onClearError:this.onClearError,children:u}),Object(a.jsx)("div",{className:"FeedPage-title FeedPage-blob",children:Object(a.jsx)("h2",{children:"Explore Friends"})}),Object(a.jsx)("div",{className:"FeedPage-people-container",children:m.length>0?m:Object(a.jsx)("div",{className:"FeedPage-no-elements FeedPage-blob",children:Object(a.jsx)("p",{children:"There aren't any users to show"})})})]}),Object(a.jsxs)("div",{className:"FeedPage-feed-container",children:[Object(a.jsxs)("div",{className:"FeedPage-title FeedPage-blob",children:[Object(a.jsx)("h2",{children:"Your Feed"}),Object(a.jsx)("p",{children:"See what your friends are talking about"})]}),Object(a.jsxs)("form",{className:"FeedPage-post-form FeedPage-blob",onSubmit:this.onPostSubmit,children:[Object(a.jsx)("img",{src:l.imageUrl,alt:"User Profile"}),Object(a.jsx)("textarea",{placeholder:"Add a post...",name:"postText",value:o,onChange:this.onChange}),Object(a.jsx)("button",{children:Object(a.jsx)("i",{className:"fa fa-arrow-right","aria-hidden":"true"})})]}),f.length>0?f:Object(a.jsx)("div",{className:"FeedPage-no-elements FeedPage-blob",children:Object(a.jsx)("p",{children:"There aren't any posts to show"})})]}),Object(a.jsxs)("div",{className:"FeedPage-cars-container",children:[Object(a.jsx)("div",{className:"FeedPage-title FeedPage-blob",children:Object(a.jsx)("h2",{children:"Explore Cars"})}),Object(a.jsx)("div",{className:"FeedPage-car-container",children:j.length>0?j:Object(a.jsx)("div",{className:"FeedPage-no-elements FeedPage-blob",children:Object(a.jsx)("p",{children:"There aren't any cars to show"})})})]})]})}}]),r}(n.Component));var je=Object(E.b)((function(e){return{authReducer:e.authReducer,postReducer:e.postReducer,userReducer:e.userReducer,carReducer:e.carReducer}}),{getPosts:ae,getRandomUsers:Y,getRandomCars:$,togglePostLike:ne,createPost:function(e){return function(t){return new Promise(function(){var r=Object(f.a)(m.a.mark((function r(a,n){var s,c,i,o,u,l;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,I("post","/posts",{text:e});case 3:if(!(s=r.sent).error){r.next=6;break}return r.abrupt("return",n(s.error));case 6:for(c={},i=[],o=0;o<s.posts.length;o++)c[s.posts[o]._id]=s.posts[o],i.push(s.posts[o]._id);for(t({type:O,posts:c}),t({type:x,newPostIds:i}),u={},l=0;l<s.users.length;l++)u[s.users[l]._id]=s.users[l];return t({type:w,users:u}),r.abrupt("return",a());case 17:return r.prev=17,r.t0=r.catch(0),r.abrupt("return",n(r.t0.message));case 20:case"end":return r.stop()}}),r,null,[[0,17]])})));return function(e,t){return r.apply(this,arguments)}}())}},createComment:se,deleteComment:ce,getUsers:K})(be),me=(r(108),function(e){var t=e.firstName,r=e.lastName,n=e.username,s=e.bio,c=e.userId,i=e.userImageUrl,o=e.alreadyFriend,u=e.loggedInUserId,l=e.onFriend;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"UserAside-user",children:[Object(a.jsxs)(h.b,{to:"/users/".concat(c),className:"UserAside-user-link",children:[Object(a.jsx)("img",{src:i,alt:"User profile"}),Object(a.jsxs)("h2",{children:[t," ",r]}),Object(a.jsxs)("p",{className:"UserAside-username",children:["@",n]}),Object(a.jsx)("p",{className:"UserAside-bio",children:s})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)(h.b,{to:"/users/".concat(c,"/friends"),children:"Friends"}),Object(a.jsx)(h.b,{to:"/users/".concat(c,"/cars"),children:"Cars"})]})]}),u!==c&&(o?Object(a.jsx)("button",{className:"UserAside-friend-btn UserAside-remove-btn",onClick:function(){return l(c)},children:"Remove Friend"}):Object(a.jsx)("button",{className:"UserAside-friend-btn",onClick:function(){return l(c)},children:"Add Friend"}))]})}),fe=(r(109),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(o.a)(this,r),(a=t.call(this,e)).state={error:"",fetching:0},a.onLike=a.onLike.bind(Object(D.a)(a)),a.onCommentSubmit=a.onCommentSubmit.bind(Object(D.a)(a)),a.onCommentDelete=a.onCommentDelete.bind(Object(D.a)(a)),a.onFriend=a.onFriend.bind(Object(D.a)(a)),a.onClearError=a.onClearError.bind(Object(D.a)(a)),a}return Object(u.a)(r,[{key:"checkMissingData",value:function(){var e=this,t=this.props,r=t.authReducer,a=t.userReducer,n=t.carReducer,s=t.postReducer,c=t.getUsers,i=t.getPosts,o=t.getCars,u=t.match,l=this.state.fetching;if(u.params.userId in a.users){var d=a.users[u.params.userId],h=d.posts.filter((function(e){return!(e in s.posts)}));h.length>0&&(l++,i(h).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))})));var b=d.cars.filter((function(e){return!(e in n.cars)}));b.length>0&&(l++,o(b).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))})))}else l++,c([u.params.userId],!0,!0).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))}));r.userId in a.users||(l++,c([r.userId]).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))}))),l!==this.state.fetching&&this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:l}))}},{key:"componentDidMount",value:function(){document.title="EngineRoom | Wall",this.checkMissingData()}},{key:"componentDidUpdate",value:function(){0===this.state.fetching&&""===this.state.error&&this.checkMissingData()}},{key:"onLike",value:function(e){var t=this;this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),this.props.togglePostLike(e).catch((function(e){return t.setState(Object(U.a)(Object(U.a)({},t.state),{},{error:e}))})).finally((function(){return t.setState(Object(U.a)(Object(U.a)({},t.state),{},{fetching:t.state.fetching-1}))}))}},{key:"onCommentSubmit",value:function(e,t,r){var a=this;e.preventDefault(),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),this.props.createComment(t,r).catch((function(e){return a.setState(Object(U.a)(Object(U.a)({},a.state),{},{error:e}))})).finally((function(){return a.setState(Object(U.a)(Object(U.a)({},a.state),{},{fetching:a.state.fetching-1}))}))}},{key:"onCommentDelete",value:function(e,t){var r=this;this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),this.props.deleteComment(e,t).catch((function(e){return r.setState(Object(U.a)(Object(U.a)({},r.state),{},{error:e}))})).finally((function(){return r.setState(Object(U.a)(Object(U.a)({},r.state),{},{fetching:r.state.fetching-1}))}))}},{key:"onFriend",value:function(e){var t=this;this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),this.props.toggleFriend(e).catch((function(e){return t.setState(Object(U.a)(Object(U.a)({},t.state),{},{error:e}))})).finally((function(){return t.setState(Object(U.a)(Object(U.a)({},t.state),{},{fetching:t.state.fetching-1}))}))}},{key:"onClearError",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{error:""}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.userReducer,n=t.carReducer,s=t.postReducer,c=t.authReducer,i=t.match,o=this.state.error,u=r.users[i.params.userId]||{_id:"",cars:[],posts:[],friends:[],firstName:"",lastName:"",imageUrl:""},l=r.users[c.userId]||{_id:"",cars:[],posts:[],friends:[],firstName:"",lastName:"",imageUrl:""},d=u.cars.map((function(e){var t=n.cars[e]||{_id:e,name:"",imageUrl:"",user:""};return Object(a.jsx)(ee,{name:t.name,imageUrl:t.imageUrl,userId:t.user,width:"200"},t._id)})),h=u.posts.map((function(t){var n=s.posts[t]||{_id:t,date:"",text:"",user:"",likers:[],comments:[]},i=r.users[n.user]||{_id:"",cars:[],posts:[],firstName:"",lastName:"",imageUrl:""};return Object(a.jsx)(he,{postId:n._id,postUser:i,postDate:n.date,postText:n.text,postLikes:n.likers,postComments:n.comments,loggedInUserId:c.userId,users:r.users,onLike:e.onLike,onCommentSubmit:e.onCommentSubmit,onCommentDelete:e.onCommentDelete},n._id)}));return Object(a.jsxs)("div",{className:"WallPage-container",children:[o&&Object(a.jsx)(J,{color:"red",onClearError:this.onClearError,children:o}),Object(a.jsx)("div",{className:"WallPage-user-container",children:Object(a.jsx)(me,{firstName:u.firstName,lastName:u.lastName,username:u.username,bio:u.bio,userId:u._id,userImageUrl:u.imageUrl,onFriend:this.onFriend,alreadyFriend:l.friends.includes(i.params.userId),loggedInUserId:c.userId})}),Object(a.jsxs)("div",{className:"WallPage-feed-container",children:[Object(a.jsxs)("div",{className:"WallPage-title WallPage-blob",children:[Object(a.jsxs)("h2",{children:[u.firstName,"'s Wall"]}),Object(a.jsxs)("p",{children:["See what's on ",u.firstName,"'s mind"]})]}),h.length>0?h:Object(a.jsx)("div",{className:"WallPage-no-elements WallPage-blob",children:Object(a.jsx)("p",{children:"There aren't any posts to show"})})]}),Object(a.jsxs)("div",{className:"WallPage-cars-container",children:[Object(a.jsx)("div",{className:"WallPage-title WallPage-blob",children:Object(a.jsxs)("h2",{children:[u.firstName,"'s Cars"]})}),d.length>0?d:Object(a.jsx)("div",{className:"WallPage-no-elements WallPage-blob",children:Object(a.jsx)("p",{children:"There aren't any cars to show"})})]})]})}}]),r}(n.Component));var pe=Object(E.b)((function(e){return{userReducer:e.userReducer,carReducer:e.carReducer,postReducer:e.postReducer,authReducer:e.authReducer}}),{getUsers:K,togglePostLike:ne,createComment:se,deleteComment:ce,getPosts:ae,getCars:Q,toggleFriend:X})(fe),ge=(r(110),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(o.a)(this,r),(a=t.call(this,e)).state={error:"",fetching:0},a.onFriend=a.onFriend.bind(Object(D.a)(a)),a.onClearError=a.onClearError.bind(Object(D.a)(a)),a}return Object(u.a)(r,[{key:"checkMissingData",value:function(){var e=this,t=this.props,r=t.authReducer,a=t.userReducer,n=t.match,s=t.getUsers,c=this.state.fetching;if(r.userId in a.users||(c++,s([r.userId]).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))}))),n.params.userId in a.users){var i=this.props.userReducer.users[n.params.userId].friends.filter((function(e){return!(e in a.users)}));0!==i.length&&(c++,s(i).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))})))}else c++,s([n.params.userId]).then((function(){var t=e.props.userReducer.users[n.params.userId].friends.filter((function(e){return!(e in a.users)}));0!==t.length&&(c++,s(t).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))})))})).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))}));c!==this.state.fetching&&this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:c}))}},{key:"componentDidMount",value:function(){document.title="EngineRoom | Friends",this.checkMissingData()}},{key:"componentDidUpdate",value:function(){0===this.state.fetching&&""===this.state.error&&this.checkMissingData()}},{key:"onFriend",value:function(e){var t=this;this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),this.props.toggleFriend(e).catch((function(e){return t.setState(Object(U.a)(Object(U.a)({},t.state),{},{error:e}))})).finally((function(){return t.setState(Object(U.a)(Object(U.a)({},t.state),{},{fetching:t.state.fetching-1}))}))}},{key:"onClearError",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{error:""}))}},{key:"render",value:function(){var e=this.props,t=e.userReducer,r=e.authReducer,n=e.match,s=this.state.error,c=t.users[n.params.userId]||{_id:"",friends:[],firstName:"",lastName:"",imageUrl:""},i=t.users[r.userId]||{_id:"",friends:[],firstName:"",lastName:"",imageUrl:""},o=c.friends.map((function(e){var r=t.users[e]||{_id:e,firstName:"",lastName:"",imageUrl:""};return Object(a.jsx)(Z,{firstName:r.firstName,lastName:r.lastName,imageUrl:r.imageUrl,id:r._id,width:"150"},r._id)}));return Object(a.jsxs)("div",{className:"FriendPage-container",children:[Object(a.jsx)(me,{firstName:c.firstName,lastName:c.lastName,username:c.username,bio:c.bio,userId:c._id,userImageUrl:c.imageUrl,onFriend:this.onFriend,alreadyFriend:i.friends.includes(n.params.userId),loggedInUserId:r.userId}),Object(a.jsxs)("div",{className:"FriendPage-inner-container",children:[s&&Object(a.jsx)(J,{color:"red",onClearError:this.onClearError,children:s}),Object(a.jsxs)("div",{className:"FriendPage-title FriendPage-blob",children:[Object(a.jsx)("h2",{children:"Friends"}),Object(a.jsxs)("p",{children:["View ",c.firstName,"'s friends"]})]}),Object(a.jsx)("div",{className:"FriendPage-people-container",children:o})]}),Object(a.jsx)("div",{className:"FriendPage-spacer"})]})}}]),r}(n.Component));var Oe=Object(E.b)((function(e){return{userReducer:e.userReducer,authReducer:e.authReducer}}),{toggleFriend:X,getUsers:K})(ge),ve=(r(111),{Container:function(e){var t=e.children;return Object(a.jsx)("div",{className:"Options-container",children:t})},Item:function(e){var t=e.children,r=e.to;e.red;return Object(a.jsx)(h.b,{className:"Options-item",to:r,children:t})}}),xe=(r(112),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"componentDidMount",value:function(){document.title="EngineRoom | Profile"}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"ProfilePage-main-container",children:[Object(a.jsxs)("div",{className:"ProfilePage-title ProfilePage-blob",children:[Object(a.jsx)("h2",{children:"Your Profile"}),Object(a.jsx)("p",{children:"Select an option to edit your EngineRoom profile"})]}),Object(a.jsxs)(ve.Container,{children:[Object(a.jsx)(ve.Item,{to:"/editProfile",children:"Edit Profile"}),Object(a.jsx)(ve.Item,{to:"/password",children:"Change Password"})]})]})}}]),r}(n.Component)),Ne=(r(113),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(o.a)(this,r),(a=t.call(this,e)).state={currentPassword:"",newPassword:"",repeatNewPassword:"",fetching:0,message:"",messageColor:""},a.onChange=a.onChange.bind(Object(D.a)(a)),a.onSubmit=a.onSubmit.bind(Object(D.a)(a)),a.onClearError=a.onClearError.bind(Object(D.a)(a)),a}return Object(u.a)(r,[{key:"componentDidMount",value:function(){document.title="EngineRoom | Password"}},{key:"onChange",value:function(e){this.setState(Object(U.a)(Object(U.a)({},this.state),{},Object(W.a)({},e.target.name,e.target.value)))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var r=this.state,a=r.currentPassword,n=r.newPassword,s=r.repeatNewPassword;if(n!==s)return this.setState(Object(U.a)(Object(U.a)({},this.state),{},{currentPassword:"",newPassword:"",repeatNewPassword:"",message:"New passwords must match",messageColor:"red"}));this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),I("POST","/auth/changePassword",{currentPassword:a,newPassword:n,repeatNewPassword:s}).then((function(e){var r="error"in e?e.error:e.message,a="error"in e?"red":"green";t.setState({message:r,messageColor:a})})).catch((function(e){return t.setState({message:e.message,messageColor:"red"})})).finally((function(){return t.setState(Object(U.a)(Object(U.a)({},t.state),{},{currentPassword:"",newPassword:"",repeatNewPassword:"",fetching:t.state.fetching-1}))}))}},{key:"onClearError",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{message:""}))}},{key:"render",value:function(){var e=this.state,t=e.currentPassword,r=e.newPassword,n=e.repeatNewPassword,s=e.message,c=e.messageColor,i=e.fetching,o=[{label:"Current Password",name:"currentPassword",type:"password",value:t,placeholder:"********"},{label:"New Password",name:"newPassword",type:"password",value:r,placeholder:"********"},{label:"Repeat New Password",name:"repeatNewPassword",type:"password",value:n,placeholder:"********"}];return Object(a.jsxs)("div",{className:"PasswordPage-container",children:[Object(a.jsxs)("div",{className:"PasswordPage-title PasswordPage-blob",children:[Object(a.jsx)("h2",{children:"Change Password"}),Object(a.jsx)("p",{children:"Change your EngineRoom password"})]}),s&&Object(a.jsx)(J,{color:c,onClearError:this.onClearError,children:s}),Object(a.jsx)(B,{onSubmit:this.onSubmit,onChange:this.onChange,fields:o,loading:0!==i,buttonText:"Change Password"})]})}}]),r}(n.Component)),we=(r(114),function(e){var t=e.name,r=e.imageUrl,n=e.mods,s=e.accelTime,c=e.power,i=e.torque;return Object(a.jsxs)("div",{className:"DetailedCar-car DetailedCar-blob",children:[Object(a.jsx)("img",{src:r,alt:t}),Object(a.jsxs)("div",{className:"DetailedCar-car-container",children:[Object(a.jsx)("h3",{children:t}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h4",{children:"Modifications"}),Object(a.jsx)("p",{children:n})]}),Object(a.jsxs)("div",{className:"DetailedCar-spec-container",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("h4",{children:"0-60 Time"}),Object(a.jsxs)("p",{children:[s," seconds"]})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h4",{children:"Power"}),Object(a.jsxs)("p",{children:[c," hp"]})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h4",{children:"Torque"}),Object(a.jsxs)("p",{children:[i," ft-lb"]})]})]})]})]})}),ye=(r(115),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(o.a)(this,r),(a=t.call(this,e)).state={error:"",fetching:0},a.onFriend=a.onFriend.bind(Object(D.a)(a)),a.onClearError=a.onClearError.bind(Object(D.a)(a)),a}return Object(u.a)(r,[{key:"checkMissingData",value:function(){var e=this,t=this.props,r=t.authReducer,a=t.userReducer,n=t.carReducer,s=t.match,c=t.getUsers,i=t.getCars,o=[];if(r.userId in a.users||o.push(r.userId),s.params.userId in a.users||o.push(s.params.userId),0!==o.length)this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),c(o).then((function(){e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}));var t=e.props.userReducer.users[s.params.userId].cars.filter((function(e){return!(e in n.cars)}));0!==t.length&&(e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching+1})),i(t).then((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))})).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t,fetching:e.state.fetching-1}))})))})).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t,fetching:e.state.fetching-1}))}));else{var u=this.props.userReducer.users[s.params.userId].cars.filter((function(e){return!(e in n.cars)}));0!==u.length&&(this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),i(u).then((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))})).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t,fetching:e.state.fetching-1}))})))}}},{key:"componentDidMount",value:function(){document.title="EngineRoom | Cars",this.checkMissingData()}},{key:"componentDidUpdate",value:function(){0===this.state.fetching&&""===this.state.error&&this.checkMissingData()}},{key:"onFriend",value:function(e){this.props.toggleFriend(e)}},{key:"onClearError",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{error:""}))}},{key:"render",value:function(){var e=this.props,t=e.userReducer,r=e.authReducer,n=e.carReducer,s=e.match,c=this.state.error,i=t.users[s.params.userId]||{cars:[],post:[],friends:[]},o=t.users[r.userId]||{cars:[],posts:[],friends:[]},u=i.cars.map((function(e){var t=n.cars[e]||{_id:e,name:"",imageUrl:"",mods:"",accelTime:"",power:"",torque:""};return Object(a.jsx)(we,{name:t.name,imageUrl:t.imageUrl,mods:t.mods,accelTime:t.accelTime,power:t.power,torque:t.torque},t._id)}));return Object(a.jsxs)("div",{className:"CarPage-container",children:[Object(a.jsx)(me,{firstName:i.firstName,lastName:i.lastName,username:i.username,bio:i.bio,userId:i._id,userImageUrl:i.imageUrl,onFriend:this.onFriend,alreadyFriend:o.friends.includes(s.params.userId),loggedInUserId:r.userId}),Object(a.jsxs)("div",{className:"CarPage-inner-container",children:[c&&Object(a.jsx)(J,{color:"red",onClearError:this.onClearError,children:c}),Object(a.jsxs)("div",{className:"CarPage-title-container",children:[Object(a.jsxs)("div",{className:"CarPage-title CarPage-blob",children:[Object(a.jsx)("h2",{children:"Cars"}),Object(a.jsxs)("p",{children:["View ",i.firstName,"'s cars"]})]}),s.params.userId===r.userId&&Object(a.jsx)(q,{className:"CarPage-add-btn",to:"/users/".concat(r.userId,"/cars/new"),children:"Add Car"})]}),Object(a.jsx)("div",{className:"CarPage-people-container",children:u})]}),Object(a.jsx)("div",{className:"CarPage-spacer"})]})}}]),r}(n.Component));var Ce=Object(E.b)((function(e){return{userReducer:e.userReducer,authReducer:e.authReducer,carReducer:e.carReducer}}),{toggleFriend:X,getUsers:K,getCars:Q})(ye),ke=r(22),Pe=r.n(ke),Se=(r(514),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(o.a)(this,r),(a=t.call(this,e)).state={make:"",model:"",year:"",modifications:"",accelTime:"",power:"",torque:"",image:null,fetching:0,error:""},a.onChange=a.onChange.bind(Object(D.a)(a)),a.onSubmit=a.onSubmit.bind(Object(D.a)(a)),a.onFileChange=a.onFileChange.bind(Object(D.a)(a)),a.onClearError=a.onClearError.bind(Object(D.a)(a)),a}return Object(u.a)(r,[{key:"checkMissingData",value:function(){var e=this,t=this.props,r=t.authReducer,a=t.userReducer,n=t.getUsers;r.userId in a.users||(this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),n([r.userId]).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{error:t}))})).finally((function(){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1}))})))}},{key:"componentDidMount",value:function(){document.title="EngineRoom | New Car",this.checkMissingData()}},{key:"componentDidUpdate",value:function(){0===this.state.fetching&&""===this.state.error&&this.checkMissingData()}},{key:"onChange",value:function(e){this.setState(Object(U.a)(Object(U.a)({},this.state),{},Object(W.a)({},e.target.name,e.target.value)))}},{key:"onSubmit",value:function(){var e=Object(f.a)(m.a.mark((function e(){var t,r,a,n,s,c,i,o,u,l,d,h,b,j,f,p,g,O,v;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,r=t.make,a=t.model,n=t.year,s=t.modifications,c=t.accelTime,i=t.power,o=t.torque,u=t.image,l=this.props,d=l.addCar,h=l.history,b=l.match,j=l.authReducer,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),e.prev=3,f="https://engineroom.s3.amazonaws.com/default-car.png",!u){e.next=17;break}if(g=null===(p=u.name.match(/\..+$/)[0])||void 0===p?void 0:p.toLowerCase()){e.next=9;break}return e.abrupt("return",this.setState(Object(U.a)(Object(U.a)({},this.state),{},{error:"Couldn't determine the file extension"})));case 9:return O="".concat(j.awsIdentityId,"/car-").concat(String(Date.now())).concat(g),"engineroom","us-east-1",Pe.a.config.update({region:"us-east-1",credentials:new Pe.a.WebIdentityCredentials({RoleArn:"arn:aws:iam::424331035336:role/Cognito_engineroomAuth_Role",WebIdentityToken:localStorage.awsToken})}),e.next=15,new Pe.a.S3.ManagedUpload({params:{Bucket:"engineroom",Key:O,Body:u}}).promise();case 15:v=e.sent,f=v.Location;case 17:return e.next=19,d(r,a,n,s,c,i,o,f);case 19:this.setState(Object(U.a)(Object(U.a)({},this.state),{},{make:"",model:"",year:"",modifications:"",accelTime:"",power:"",torque:"",image:null,fetching:0,error:""}),(function(){return h.push("/users/".concat(b.params.userId,"/cars"))})),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:0,error:e.t0.message}));case 25:case"end":return e.stop()}}),e,this,[[3,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"onFileChange",value:function(e){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{image:e.target.files[0]}))}},{key:"onClearError",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{error:""}))}},{key:"render",value:function(){var e=this.props,t=e.userReducer,r=e.authReducer,n=e.match,s=this.state,c=s.make,i=s.model,o=s.year,u=s.modifications,l=s.accelTime,d=s.power,h=s.torque,b=s.fetching,j=s.image,m=s.error,f=t.users[r.userId]||{_id:"",friends:[],firstName:"",lastName:"",imageUrl:""};return Object(a.jsxs)("div",{className:"NewCarPage-container",children:[Object(a.jsx)(me,{firstName:f.firstName,lastName:f.lastName,username:f.username,bio:f.bio,userId:f._id,userImageUrl:f.imageUrl,onFriend:this.onFriend,alreadyFriend:f.friends.includes(n.params.userId),loggedInUserId:r.userId}),Object(a.jsxs)("div",{className:"NewCarPage-inner-container",children:[m&&Object(a.jsx)(J,{color:"red",onClearError:this.onClearError,children:m}),Object(a.jsxs)("div",{className:"NewCarPage-title NewCarPage-blob",children:[Object(a.jsx)("h2",{children:"Add a Car"}),Object(a.jsx)("p",{children:"Add a car to your EngineRoom profile"})]}),Object(a.jsxs)("div",{className:"NewCarPage-form NewCarPage-blob",children:[Object(a.jsxs)("div",{className:"NewCarPage-form-row",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"year",children:"Year:"}),Object(a.jsx)("input",{type:"text",id:"year",name:"year",value:o,onChange:this.onChange,placeholder:"2021"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"make",children:"Make:"}),Object(a.jsx)("input",{type:"text",id:"make",name:"make",value:c,onChange:this.onChange,placeholder:"Ford"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"model",children:"Model:"}),Object(a.jsx)("input",{type:"text",id:"model",name:"model",value:i,onChange:this.onChange,placeholder:"F150"})]})]}),Object(a.jsxs)("div",{className:"NewCarPage-form-row",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"power",children:"Power (hp):"}),Object(a.jsx)("input",{type:"text",id:"power",name:"power",value:d,onChange:this.onChange,placeholder:"155"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"torque",children:"Torque (ft-lb):"}),Object(a.jsx)("input",{type:"text",id:"torque",name:"torque",value:h,onChange:this.onChange,placeholder:"150"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"accelTime",children:"0-60 Time (s):"}),Object(a.jsx)("input",{type:"text",id:"accelTime",name:"accelTime",value:l,onChange:this.onChange,placeholder:"8.7"})]})]}),Object(a.jsxs)("div",{className:"NewCarPage-form-row",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"image",children:"Image:"}),Object(a.jsx)("img",{src:j?URL.createObjectURL(j):"https://engineroom.s3.amazonaws.com/default-car.png",alt:"preview"}),Object(a.jsx)("label",{htmlFor:"image",children:"Browse..."}),Object(a.jsx)("input",{type:"file",id:"image",name:"image",accept:"image/*",onChange:this.onFileChange})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"modifications",children:"Modifications:"}),Object(a.jsx)("textarea",{id:"modifications",name:"modifications",value:u,onChange:this.onChange,placeholder:"K&N cold air intake, Bridgestone Ecopia tires"}),Object(a.jsx)("button",{className:"NewCarPage-submit-button",onClick:this.onSubmit,children:0!==b?"Loading...":"Submit"})]})]})]})]}),Object(a.jsx)("div",{className:"NewCarPage-spacer"})]})}}]),r}(n.Component));var Ie=Object(E.b)((function(e){return{userReducer:e.userReducer,authReducer:e.authReducer}}),{getUsers:K,addCar:function(e,t,r,a,n,s,c,i){return function(o){return new Promise(function(){var u=Object(f.a)(m.a.mark((function u(l,d){var h,b,j,f,p;return m.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,I("post","/cars",{name:"".concat(r," ").concat(e," ").concat(t),mods:a,accelTime:n,power:s,torque:c,imageUrl:i});case 3:if(!(h=u.sent).error){u.next=6;break}return u.abrupt("return",d(h.error));case 6:for(b={},j=0;j<h.cars.length;j++)b[h.cars[j]._id]=h.cars[j];for(o({type:k,cars:b}),f={},p=0;p<h.users.length;p++)f[h.users[p]._id]=h.users[p];return o({type:w,users:f}),u.abrupt("return",l());case 15:return u.prev=15,u.t0=u.catch(0),u.abrupt("return",d(u.t0.message));case 18:case"end":return u.stop()}}),u,null,[[0,15]])})));return function(e,t){return u.apply(this,arguments)}}())}}})(Se),Re=(r(515),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var a;Object(o.a)(this,r);var n=(a=t.call(this,e)).props,s=n.authReducer,c=n.userReducer.users[s.userId];return a.state={firstName:(null===c||void 0===c?void 0:c.firstName)||"",lastName:(null===c||void 0===c?void 0:c.lastName)||"",bio:(null===c||void 0===c?void 0:c.bio)||"",image:null,error:"",fetching:0},a.onChange=a.onChange.bind(Object(D.a)(a)),a.onSubmit=a.onSubmit.bind(Object(D.a)(a)),a.onFileChange=a.onFileChange.bind(Object(D.a)(a)),a.onClearError=a.onClearError.bind(Object(D.a)(a)),a}return Object(u.a)(r,[{key:"checkMissingData",value:function(){var e=this,t=this.props,r=t.authReducer,a=t.userReducer,n=t.getUsers;r.userId in a.users||(this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:1})),n([r.userId]).then((function(){var t=e.props.userReducer.users[r.userId];e.setState({firstName:t.firstName,lastName:t.lastName,bio:t.bio,fetching:e.state.fetching-1})})).catch((function(t){return e.setState(Object(U.a)(Object(U.a)({},e.state),{},{fetching:e.state.fetching-1,error:t}))})))}},{key:"componentDidMount",value:function(){document.title="EngineRoom | Edit Profile",this.checkMissingData()}},{key:"componentDidUpdate",value:function(){0===this.state.fetching&&""===this.state.error&&this.checkMissingData()}},{key:"onChange",value:function(e){this.setState(Object(U.a)(Object(U.a)({},this.state),{},Object(W.a)({},e.target.name,e.target.value)))}},{key:"onClearError",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{error:""}))}},{key:"onSubmit",value:function(){var e=Object(f.a)(m.a.mark((function e(){var t,r,a,n,s,c,i,o,u,l,d,h,b,j,f,p,g,O,v;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,r=t.firstName,a=t.lastName,n=t.bio,s=t.image,c=this.props,i=c.history,o=c.authReducer,u=c.editProfile,l=c.userReducer,d=l.users[o.userId],this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),e.prev=4,h=l.users[o.userId].imageUrl,!s){e.next=24;break}if(j=null===(b=s.name.match(/\..+$/)[0])||void 0===b?void 0:b.toLowerCase()){e.next=10;break}return e.abrupt("return",this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching-1,error:"Couldn't determine the file extension of your image"})));case 10:if(f="".concat(o.awsIdentityId,"/user-").concat(String(Date.now())).concat(j),p="engineroom","us-east-1",Pe.a.config.update({region:"us-east-1",credentials:new Pe.a.WebIdentityCredentials({RoleArn:"arn:aws:iam::424331035336:role/Cognito_engineroomAuth_Role",WebIdentityToken:localStorage.awsToken,DurationSeconds:3600})}),!(g=d.imageUrl.match(/(user|car)-\d+.\w+$/))){e.next=20;break}return O=new Pe.a.S3,e.next=19,O.deleteObject({Bucket:p,Key:"".concat(o.awsIdentityId,"/").concat(g[0])}).promise();case 19:e.sent;case 20:return e.next=22,new Pe.a.S3.ManagedUpload({params:{Bucket:p,Key:f,Body:s}}).promise();case 22:v=e.sent,h=v.Location;case 24:return this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching+1})),e.next=27,u(r,a,n,h);case 27:this.setState(Object(U.a)(Object(U.a)({},this.state),{},{firstName:"",lastName:"",bio:"",image:null,fetching:this.state.fetching-1}),(function(){return i.push("/users/".concat(o.userId))})),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(4),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{fetching:this.state.fetching-1,error:e.t0.message}));case 33:case"end":return e.stop()}}),e,this,[[4,30]])})));return function(){return e.apply(this,arguments)}}()},{key:"onFileChange",value:function(e){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{image:e.target.files[0]}))}},{key:"render",value:function(){var e=this.props,t=e.userReducer,r=e.authReducer,n=this.state,s=n.firstName,c=n.lastName,i=n.bio,o=n.fetching,u=n.image,l=n.error,d=t.users[r.userId]||{};return Object(a.jsxs)("div",{className:"EditProfilePage-container",children:[l&&Object(a.jsx)(J,{color:"red",onClearError:this.onClearError,children:l}),Object(a.jsxs)("div",{className:"EditProfilePage-title EditProfilePage-blob",children:[Object(a.jsx)("h2",{children:"Edit your Profile"}),Object(a.jsx)("p",{children:"Edit your EngineRoom profile"})]}),Object(a.jsxs)("div",{className:"EditProfilePage-form EditProfilePage-blob",children:[Object(a.jsxs)("div",{className:"EditProfilePage-image-container",children:[Object(a.jsx)("label",{htmlFor:"image",children:"Profile Image"}),Object(a.jsx)("img",{src:u?URL.createObjectURL(u):d.imageUrl,alt:"preview"}),Object(a.jsx)("label",{htmlFor:"image",children:"Browse..."}),Object(a.jsx)("input",{type:"file",id:"image",name:"image",accept:"image/*",onChange:this.onFileChange})]}),Object(a.jsxs)("div",{className:"EditProfilePage-field-container",children:[Object(a.jsx)("label",{htmlFor:"firstName",children:"First Name:"}),Object(a.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:s,onChange:this.onChange,placeholder:"John"}),Object(a.jsx)("label",{htmlFor:"lastName",children:"Last Name:"}),Object(a.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:c,onChange:this.onChange,placeholder:"Doe"}),Object(a.jsx)("label",{htmlFor:"bio",children:"Bio:"}),Object(a.jsx)("textarea",{id:"bio",name:"bio",value:i,onChange:this.onChange,placeholder:"Tell us about yourself..."}),Object(a.jsx)("button",{className:"EditProfilePage-submit-button",onClick:this.onSubmit,children:o?"Loading...":"Submit"})]})]})]})}}]),r}(n.Component));var Ee=Object(E.b)((function(e){return{userReducer:e.userReducer,authReducer:e.authReducer}}),{getUsers:K,editProfile:function(e,t,r,a){return function(n){return new Promise(function(){var s=Object(f.a)(m.a.mark((function s(c,i){var o,u,l;return m.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,I("put","/users",{firstName:e,lastName:t,bio:r,imageUrl:a});case 3:if(!(o=s.sent).error){s.next=6;break}return s.abrupt("return",i(o.error));case 6:for(u={},l=0;l<o.users.length;l++)u[o.users[l]._id]=o.users[l];return n({type:w,users:u}),s.abrupt("return",c());case 12:return s.prev=12,s.t0=s.catch(0),s.abrupt("return",i(s.t0.message));case 15:case"end":return s.stop()}}),s,null,[[0,12]])})));return function(e,t){return s.apply(this,arguments)}}())}}})(Re),Ue=(r(516),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){document.querySelector("html").style.minHeight="".concat(window.innerHeight,"px")}},{key:"render",value:function(){var e=this.props,t=e.username,r=e.userId,n=e.logOut;return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(h.a,{children:[Object(a.jsx)(_,{username:t,userId:r,logOut:n}),Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{path:"/editProfile",component:F(Ee)}),Object(a.jsx)(b.a,{path:"/password",component:F(Ne)}),Object(a.jsx)(b.a,{path:"/profile",component:F(xe)}),Object(a.jsx)(b.a,{path:"/users/:userId/cars/new",component:F(Ie)}),Object(a.jsx)(b.a,{path:"/users/:userId/cars",component:F(Ce)}),Object(a.jsx)(b.a,{path:"/users/:userId/friends",component:F(Oe)}),Object(a.jsx)(b.a,{path:"/users/:userId",component:F(pe)}),Object(a.jsx)(b.a,{path:"/feed",component:F(je)}),Object(a.jsx)(b.a,{path:"/explore",component:F(re)}),Object(a.jsx)(b.a,{path:"/login",component:H}),Object(a.jsx)(b.a,{path:"/signup",component:z}),Object(a.jsx)(b.a,{path:"/about",component:A}),Object(a.jsx)(b.a,{path:"/",component:L})]}),Object(a.jsx)(M,{})]})})}}]),r}(n.Component));var Fe=Object(E.b)((function(e){var t,r;return{username:null===e||void 0===e||null===(t=e.authReducer)||void 0===t?void 0:t.username,userId:null===e||void 0===e||null===(r=e.authReducer)||void 0===r?void 0:r.userId}}),{logOut:function(){return function(e){localStorage.removeItem("token"),localStorage.removeItem("awsToken"),e({type:S}),e({type:N}),e({type:C}),e({type:g})}}})(Ue),De=r(23),_e=r(76),Me={userId:"",username:"",awsIdentityId:""};var Te=r(49),Le={posts:{},feedPostIds:{ids:[],lastUpdated:0}};var Ae={cars:{},randomCarIds:{ids:[],lastUpdated:0}};var We={users:{},randomUserIds:{ids:[],lastUpdated:0}};var qe=Object(De.c)({authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(U.a)(Object(U.a)({},e),{},{userId:t.id,username:t.username,awsIdentityId:t.awsIdentityId});case g:return Me;default:return e}},postReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(U.a)(Object(U.a)({},e),{},{posts:Object(U.a)(Object(U.a)({},e.posts),t.posts)});case x:return Object(U.a)(Object(U.a)({},e),{},{feedPostIds:{ids:[].concat(Object(Te.a)(t.newPostIds),Object(Te.a)(e.feedPostIds.ids)),lastUpdated:Date.now()}});case N:return Le;case v:return Object(U.a)(Object(U.a)({},e),{},{feedPostIds:{ids:t.feedPostIds,lastUpdated:Date.now()}});default:return e}},carReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(U.a)(Object(U.a)({},e),{},{cars:Object(U.a)(Object(U.a)({},e.cars),t.cars)});case S:return Ae;case P:return Object(U.a)(Object(U.a)({},e),{},{randomCarIds:{ids:t.randomCarIds,lastUpdated:Date.now()}});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(U.a)(Object(U.a)({},e),{},{users:Object(U.a)(Object(U.a)({},e.users),t.users)});case C:return We;case y:return Object(U.a)(Object(U.a)({},e),{},{randomUserIds:{ids:t.randomUserIds,lastUpdated:Date.now()}});default:return e}}});var Be=r(77),Je=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,518)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),a(e),n(e),s(e),c(e)}))},Ge=function(){var e;return window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||De.d,e=Object(De.a)(_e.a),Object(De.e)(qe,e)}();if(localStorage.getItem("token")){var ze=Object(Be.a)(localStorage.getItem("token"));Date.now()/1e3-ze.iat<3600?Ge.dispatch({type:p,id:ze.id,username:ze.username,awsIdentityId:ze.awsIdentityId}):localStorage.removeItem("token")}i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(E.a,{store:Ge,children:Object(a.jsx)(Fe,{})})}),document.getElementById("root")),Je()},83:function(e,t,r){},91:function(e,t,r){},95:function(e,t,r){},96:function(e,t,r){},97:function(e,t,r){},98:function(e,t,r){},99:function(e,t,r){}},[[517,1,2]]]);
//# sourceMappingURL=main.38c9bc33.chunk.js.map